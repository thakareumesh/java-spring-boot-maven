---
- hosts: dev
  become: true
  tasks:
   - name: install python pip
     yum:
       name: python-pip
       state: present
   - name: start docker
     service:
       name: docker
       state: started
       enabled: yes
   - name: install docker-py python module
     pip:
       name: docker-py
       state: present
   - name: start the container
     docker_container:
       name: projectfinal
     imagePullSecrets:
       dockerhubcred: docker-hub-fi
       name: projectfinal
       image: "umesh4321/projectfinal:{{DOCKER_TAG}}"
       state: started
       published_ports:
       - "8080:80"
       tty: true
       detach: true
